<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flight Operations</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

<div class="top-bar">
    <h1>Flight Information</h1>
    <a href="/" class="back-link">‚Üê Dashboard</a>
</div>

<div class="layout">

    <!-- ADD FLIGHT -->
    <div class="form-box">
        <h2>Add New Flight</h2>

        <form method="POST">
            <input type="text" name="flight_no" placeholder="Flight Number" required>

            <!-- Departure Airport -->
            <select name="departure_airport_id" required>
                <option value="">Departure Airport</option>
                {% for a in airports %}
                    <option value="{{ a.id }}">
                        {{ a.code }} - {{ a.city }}
                    </option>
                {% endfor %}
            </select>

            <!-- Arrival Airport -->
            <select name="arrival_airport_id" required>
                <option value="">Destination Airport</option>
                {% for a in airports %}
                    <option value="{{ a.id }}">
                        {{ a.code }} - {{ a.city }}
                    </option>
                {% endfor %}
            </select>

            <div class="time-row">
                <div>
                    <label>Departure Time</label>
                    <input type="time" name="departure_time" required>
                </div>
                <div>
                    <label>Arrival Time</label>
                    <input type="time" name="arrival_time" required>
                </div>
            </div>

            <select name="status">
                <option value="On Time">On Time</option>
                <option value="Delayed">Delayed</option>
                <option value="Cancelled">Cancelled</option>
            </select>

            <button type="submit">Save Flight</button>
        </form>
    </div>

    <!-- FLIGHTS TABLE -->
    <div class="table-box">
        <h2>Scheduled Flights</h2>

        {% if flights %}
        <table>
            <thead>
                <tr>
                    <th>Flight</th>
                    <th>Departure City</th>
                    <th>Destination City</th>
                    <th>Dep Time</th>
                    <th>Arr Time</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
            {% for f in flights %}
                <tr>
                    <td>{{ f.flight_no }}</td>
                    <td>{{ f.departure_city }}</td>
                    <td>{{ f.destination_city }}</td>
                    <td>{{ f.departure_time }}</td>
                    <td>{{ f.arrival_time }}</td>

                    {% if f.status == "On Time" %}
                        <td class="on">{{ f.status }}</td>
                    {% elif f.status == "Delayed" %}
                        <td class="delay">{{ f.status }}</td>
                    {% else %}
                        <td class="cancel">{{ f.status }}</td>
                    {% endif %}

                    <td class="actions">
                        <a href="/edit_flight/{{ f.id }}" class="edit-btn">Edit</a>
                        <a href="/delete_flight/{{ f.id }}"
                           class="delete-btn"
                           onclick="return confirm('Delete this flight?')">
                           Delete
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
            <p class="empty">No flight records available.</p>
        {% endif %}
    </div>

</div>

</body>
</html>
